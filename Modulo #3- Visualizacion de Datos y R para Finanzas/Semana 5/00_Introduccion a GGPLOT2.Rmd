---
title: "00_Introduccion a ggplot"
output: html_document
date: "2023-05-27"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

## Gramatica de GGPLOT

Utiliza una lógica denominada "gramática de gráficos" para construir gráficos de forma sistemática y personalizable.

A continuación, te proporcionaré una explicación básica de la lógica detrás de ggplot2:

-   **Capa de datos:** En ggplot2, comenzamos especificando los datos que queremos visualizar. Esto se hace mediante la función ggplot() y se le proporciona un conjunto de datos (un data frame) como argumento.

-   **Capa estética (aesthetics):** Luego, definimos cómo queremos mapear las variables de nuestros datos a elementos visuales del gráfico, como colores, formas y tamaños. Esto se hace mediante la función aes() (aesthetics), donde especificamos las variables que deseamos mapear a diferentes atributos visuales.

-   **Capa geométrica:** La capa geométrica define el tipo de gráfico que queremos crear, como un gráfico de dispersión (geom_point()), un gráfico de líneas (geom_line()), un histograma (geom_histogram()), entre otros. Especificamos la capa geométrica utilizando una función como geom_point() y la colocamos después de la función ggplot().

-   **Otros componentes opcionales:** Además de la capa de datos, la capa estética y la capa geométrica, podemos agregar otros componentes opcionales a nuestros gráficos, como títulos, etiquetas de ejes, leyendas, facetas (para dividir los datos en subgráficos) y temas visuales. Estos componentes se especifican mediante funciones adicionales, como `labs()`, `xlab()`, `ylab()`, `facet_wrap()`, `theme()`, entre otros.

Combinación y ajuste de capas: Es posible combinar varias capas geométricas en un solo gráfico para agregar más información o comparar diferentes variables. Esto se logra mediante el uso del operador + para agregar capas adicionales después de la capa geométrica inicial.

Una vez que se ha construido el objeto ggplot con todas las capas y componentes deseados, podemos renderizar el gráfico utilizando la función print() o simplemente escribiendo el nombre del objeto ggplot.

```{r}
# Create a sample data frame
data <- data.frame(category = c("A", "B", "C", "D"),
                   value = c(10, 15, 8, 12))

# Set the title and axis labels
chart_title <- "Bar Chart"
x_label <- "Category"
y_label <- "Value"

# Create the bar chart using ggplot
chart <- ggplot(data, aes(x = category, y = value)) +
  geom_bar(stat = "identity", fill = "steelblue") +
  labs(title = chart_title, x = x_label, y = y_label)

# Print the chart
plot(chart)
```

## Geom Bar

La función **`geom_bar()`** en ggplot2 tiene varios argumentos que puedes utilizar para personalizar la apariencia y el comportamiento del gráfico de barras. Aquí tienes algunos de los argumentos más comúnmente utilizados:

-   **`stat`**: Este argumento determina cómo se calcula la altura de las barras. De manera predeterminada, se establece en **`"count"`**, lo que crea una barra para cada valor único de la variable x y calcula la altura como el recuento de observaciones en cada categoría. También puedes establecerlo en **`"identity"`** para utilizar los valores reales de y especificados en los datos.

-   **`position`**: Este argumento determina la posición de las barras. De manera predeterminada, se establece en **`"stack"`**, lo que apila las barras una encima de la otra. Otras opciones incluyen **`"dodge"`** (las barras se colocan una al lado de la otra) y **`"fill"`** (las barras se llenan hasta la parte superior).

-   **`width`**: Este argumento te permite controlar el ancho de las barras. Puedes especificar un valor fijo de ancho (por ejemplo, **`width = 0.5`**) o utilizar una función (por ejemplo, **`width = position_dodge(0.9)`**) para ajustar el ancho según la posición de las barras.

-   **`fill`**: Este argumento establece el color de relleno de las barras. Puedes especificar un color único (por ejemplo, **`fill = "steelblue"`**) o asignarlo a una variable en los datos para crear barras de diferentes colores según las categorías (por ejemplo, **`fill = categoria`**).

-   **`color`**: Este argumento establece el color del borde de las barras. Al igual que con **`fill`**, puedes especificar un color único o asignarlo a una variable en los datos.

-   **`alpha`**: Este argumento controla la transparencia de las barras. Acepta un valor entre 0 (completamente transparente) y 1 (completamente opaco).

-   **`...`**: Este argumento de puntos suspensivos te permite pasar parámetros gráficos adicionales para personalizar la apariencia de las barras, como **`size`**, **`linetype`** o **`position`**.

Estos son solo algunos de los argumentos más comúnmente utilizados de **`geom_bar()`**. Puedes encontrar más detalles y opciones adicionales en la documentación oficial de ggplot2: [**https://ggplot2.tidyverse.org/reference/geom_bar.html**](https://ggplot2.tidyverse.org/reference/geom_bar.html)

\
Cantidad de titulos transados cada semana (Grafico de barra)

```{r pressure, echo=FALSE}
plot(pressure)
```

## Geom Point

La función **`geom_point()`** en ggplot2 también tiene varios argumentos que puedes utilizar para personalizar la apariencia y el comportamiento de los puntos en un gráfico. A continuación se presentan algunos de los argumentos más comúnmente utilizados:

-   **`shape`**: Este argumento determina la forma de los puntos. Puedes especificar diferentes valores numéricos o códigos de letras para elegir entre una variedad de formas predefinidas, como círculos, cuadrados, triángulos, etc.

-   **`size`**: Este argumento establece el tamaño de los puntos. Puedes proporcionar un valor numérico para un tamaño fijo o utilizar una variable en los datos para crear puntos de diferentes tamaños.

-   **`color`**: Este argumento establece el color de los puntos. Al igual que con otros elementos gráficos, puedes especificar un color único o asignarlo a una variable en los datos para crear puntos de diferentes colores.

-   **`fill`**: Si deseas rellenar los puntos con color en lugar de tener solo el contorno, puedes utilizar este argumento para establecer el color de relleno de los puntos.

-   **`alpha`**: Al igual que con **`geom_bar()`**, el argumento **`alpha`** también está disponible en **`geom_point()`** y te permite controlar la transparencia de los puntos.

-   **`...`**: Al igual que con **`geom_bar()`**, el argumento de puntos suspensivos **`...`** te permite pasar parámetros gráficos adicionales para personalizar la apariencia de los puntos, como **`shape`**, **`size`**, **`color`** y otros.

Estos son solo algunos de los argumentos más comúnmente utilizados de **`geom_point()`**. Puedes encontrar más detalles y opciones adicionales en la documentación oficial de ggplot2: [**https://ggplot2.tidyverse.org/reference/geom_point.html**](https://ggplot2.tidyverse.org/reference/geom_point.html)

## Grafico de Dispersion- Instrumentos de Renta Fija (Precio de un bono y su tasa de cupon)

En finanzas, el precio de un bono y su tasa de cupón están relacionados de manera inversa. La tasa de cupón de un bono es el porcentaje de interés anual que el emisor del bono acuerda pagar a los tenedores de bonos. Por otro lado, el precio del bono es el valor presente de todos los flujos de efectivo futuros que el bono generará, incluidos los pagos de cupón y el valor nominal del bono al vencimiento.

Cuando la tasa de cupón de un bono es mayor que la tasa de interés requerida por el mercado, se dice que el bono se emite con un "descuento". En este caso, el precio del bono será inferior a su valor nominal, ya que los inversores están dispuestos a pagar menos por recibir una tasa de interés más alta.

Por el contrario, cuando la tasa de cupón de un bono es menor que la tasa de interés requerida por el mercado, se dice que el bono se emite con una "prima". En este caso, el precio del bono será superior a su valor nominal, ya que los inversores están dispuestos a pagar más por recibir una tasa de interés más baja.

En resumen, si la tasa de cupón de un bono aumenta, su precio tiende a disminuir, y si la tasa de cupón disminuye, su precio tiende a aumentar. Esto se debe a que los inversores comparan la tasa de cupón del bono con las tasas de interés actuales del mercado y ajustan el precio del bono en consecuencia para obtener un rendimiento adecuado en comparación con otras oportunidades de inversión.

## Grafico de Dispersion- Instrumentos de Renta Fija (precio de un bono y los días al vencimiento )

La relación entre el precio de un bono y los días al vencimiento del mismo se basa en el concepto de la sensibilidad de los bonos al tiempo, conocida como duración.

En general, cuando los días al vencimiento de un bono disminuyen, su precio tiende a acercarse a su valor nominal o valor de vencimiento. Esto se debe a que a medida que el bono se acerca a su vencimiento, los flujos de efectivo futuros se vuelven más predecibles y se espera que se paguen en su totalidad.

Por otro lado, a medida que los días al vencimiento aumentan, el precio del bono tiende a ser más sensible a los cambios en las tasas de interés. Si las tasas de interés aumentan, el precio del bono tiende a disminuir, ya que los flujos de efectivo futuros del bono se descuentan a una tasa de interés más alta. Por el contrario, si las tasas de interés disminuyen, el precio del bono tiende a aumentar.

Es importante tener en cuenta que la relación entre el precio del bono y los días al vencimiento puede verse afectada por otros factores, como los pagos de cupón, la calidad crediticia del emisor del bono y las condiciones del mercado. Además, los bonos con características especiales, como bonos con opciones incorporadas, pueden tener relaciones más complejas entre el precio y los días al vencimiento.

En resumen, a medida que los días al vencimiento disminuyen, el precio del bono tiende a acercarse a su valor nominal, mientras que a medida que los días al vencimiento aumentan, el precio del bono tiende a ser más sensible a los cambios en las tasas de interés.
